/// Copyright 2014-2015 Red Hat, Inc. and/or its affiliates
/// and other contributors as indicated by the @author tags.
///
/// Licensed under the Apache License, Version 2.0 (the "License");
/// you may not use this file except in compliance with the License.
/// You may obtain a copy of the License at
///
///   http://www.apache.org/licenses/LICENSE-2.0
///
/// Unless required by applicable law or agreed to in writing, software
/// distributed under the License is distributed on an "AS IS" BASIS,
/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
/// See the License for the specific language governing permissions and
/// limitations under the License.


var HawkularAccounts;
(function (HawkularAccounts) {
    HawkularAccounts.pluginName = "hawkular-accounts";
    HawkularAccounts.log = Logger.get(HawkularAccounts.pluginName);
    HawkularAccounts.templatePath = "plugins/accounts/html";
})(HawkularAccounts || (HawkularAccounts = {}));

var HawkularAccounts;
(function (HawkularAccounts) {
    HawkularAccounts._module = angular.module(HawkularAccounts.pluginName, []);
    var accountsTab = undefined;
    HawkularAccounts._module.config(['$locationProvider', '$routeProvider', 'HawtioNavBuilderProvider', function ($locationProvider, $routeProvider, builder) {
        accountsTab = builder.create().id(HawkularAccounts.pluginName).title(function () { return "Accounts"; }).href(function () { return "/accounts"; }).subPath("My account", "accounts", builder.join(HawkularAccounts.templatePath, 'accounts.html')).subPath("Organizations", "organizations", builder.join(HawkularAccounts.templatePath, 'organizations.html')).build();
        builder.configureRouting($routeProvider, accountsTab);
        $routeProvider.when('/accounts/organizations/new', { templateUrl: builder.join(HawkularAccounts.templatePath, 'organization_new.html') });
        $locationProvider.html5Mode(true);
    }]);
    HawkularAccounts._module.run(['HawtioNav', function (HawtioNav) {
    }]);
    hawtioPluginLoader.addModule(HawkularAccounts.pluginName);
})(HawkularAccounts || (HawkularAccounts = {}));

var HawkularAccounts;
(function (HawkularAccounts) {
    var AuthService = (function () {
        function AuthService($rootScope, $window) {
            var _this = this;
            this.$rootScope = $rootScope;
            this.$window = $window;
            this.onReady(function () {
                _this.$rootScope['username'] = _this.keycloak().idTokenParsed.name;
            });
        }
        AuthService.prototype.keycloak = function () {
            return this.$window['keycloak'];
        };
        AuthService.prototype.onReady = function (callback) {
            var _this = this;
            if (this.$window['keycloakReady'] === true) {
                callback();
            }
            else {
                this.keycloak().onReady = function () {
                    _this.$window['keycloakReady'] = true;
                    callback();
                };
            }
        };
        AuthService.prototype.logout = function () {
            return this.keycloak().logout();
        };
        AuthService.prototype.updateToken = function (periodicity) {
            return this.keycloak().updateToken(periodicity);
        };
        AuthService.prototype.token = function () {
            return this.keycloak().token;
        };
        AuthService.prototype.isAuthenticated = function () {
            return this.keycloak() && this.keycloak().authenticated;
        };
        AuthService.$inject = ['$rootScope', '$window'];
        return AuthService;
    })();
    HawkularAccounts.AuthService = AuthService;
    HawkularAccounts._module.service('Auth', AuthService);
})(HawkularAccounts || (HawkularAccounts = {}));

var HawkularAccounts;
(function (HawkularAccounts) {
    var AuthInterceptorService = (function () {
        function AuthInterceptorService($q, Auth) {
            var _this = this;
            this.$q = $q;
            this.Auth = Auth;
            this.request = function (request) {
                console.debug('Intercepting request');
                var BASE_URL = "http://localhost:8080/hawkular-";
                var addBearer, deferred;
                if (request.url.indexOf(BASE_URL) === -1) {
                    console.debug('The requested URL is not part of the base URL. Base URL: ' + BASE_URL + ', requested URL: ' + request.url);
                    return request;
                }
                addBearer = function () {
                    return _this.Auth.updateToken(5).success(function () {
                        var token = _this.Auth.token();
                        console.debug('Adding bearer token to the request: ' + token);
                        request.headers.Authorization = 'Bearer ' + token;
                        deferred.notify();
                        return deferred.resolve(request);
                    }).error(function () {
                        console.log("Couldn't update token");
                    });
                };
                deferred = _this.$q.defer();
                _this.Auth.onReady(addBearer);
                return _this.$q.when(deferred.promise);
            };
            this.responseError = function (rejection) {
                console.debug('Intercepting error response');
                if (rejection.status === 401) {
                    _this.Auth.logout();
                }
                return _this.$q.reject(rejection);
            };
        }
        AuthInterceptorService.Factory = function ($q, Auth) {
            return new AuthInterceptorService($q, Auth);
        };
        AuthInterceptorService.$inject = ['$q', 'Auth'];
        return AuthInterceptorService;
    })();
    HawkularAccounts.AuthInterceptorService = AuthInterceptorService;
    HawkularAccounts._module.config(function ($httpProvider) {
        console.debug('Adding AuthInterceptor');
        return $httpProvider.interceptors.push(HawkularAccounts.AuthInterceptorService.Factory);
    });
})(HawkularAccounts || (HawkularAccounts = {}));

var HawkularAccounts;
(function (HawkularAccounts) {
    HawkularAccounts.OrganizationsController = HawkularAccounts._module.controller("HawkularAccounts.OrganizationsController", [
        '$scope',
        'HawkularAccounts.OrganizationService',
        '$log',
        '$location',
        function ($scope, OrganizationService, $log, $location) {
            $scope.organizations = [];
            $scope.loading = true;
            $scope.load = function () {
                $log.debug("Trying to load the organizations for this user.");
                $scope.organizations = OrganizationService.query({}, function () {
                    $log.debug("List of organizations retrieved.");
                    $scope.loading = false;
                }, function () {
                    $log.warn("List of organizations could NOT be retrieved.");
                    $scope.loading = false;
                });
            };
            $scope.showCreateForm = function () {
                $location.path('/accounts/organizations/new');
            };
            $scope.remove = function (organization) {
                organization.$remove().then(function () {
                    $log.debug("Organization removed");
                    $scope.organizations.splice($scope.organizations.indexOf(organization), 1);
                });
            };
            $scope.load();
        }
    ]);
    HawkularAccounts.OrganizationNewController = HawkularAccounts._module.controller("HawkularAccounts.OrganizationNewController", [
        '$scope',
        'HawkularAccounts.OrganizationService',
        '$log',
        '$location',
        function ($scope, OrganizationService, $log, $location) {
            $scope.organizationNew = new OrganizationService({});
            $scope.persist = function () {
                $scope.organizationNew.$save({}, function () {
                    $log.debug("Organization added.");
                    $location.path('/accounts/organizations');
                }, function () {
                    $log.debug("Organization could NOT be added.");
                });
                $log.debug("Trying to persist the organization");
            };
        }
    ]);
    HawkularAccounts.OrganizationService = HawkularAccounts._module.service("HawkularAccounts.OrganizationService", ["$resource", function ($resource) {
        return $resource('http://localhost:8080/hawkular-accounts/organizations/:id', { id: '@id' });
    }]);
    HawkularAccounts._module.requires.push("ngResource");
})(HawkularAccounts || (HawkularAccounts = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluY2x1ZGVzLmpzIiwiL29wdC9naXQvaGF3a3VsYXItdWktY29tcG9uZW50cy9hY2NvdW50cy90cy9hY2NvdW50c0dsb2JhbHMudHMiLCIvb3B0L2dpdC9oYXdrdWxhci11aS1jb21wb25lbnRzL2FjY291bnRzL3RzL2FjY291bnRzUGx1Z2luLnRzIiwiL29wdC9naXQvaGF3a3VsYXItdWktY29tcG9uZW50cy9hY2NvdW50cy90cy9hdXRoLnRzIiwiL29wdC9naXQvaGF3a3VsYXItdWktY29tcG9uZW50cy9hY2NvdW50cy90cy9hdXRoSW50ZXJjZXB0b3IudHMiLCIvb3B0L2dpdC9oYXdrdWxhci11aS1jb21wb25lbnRzL2FjY291bnRzL3RzL29yZ2FuaXphdGlvbnMudHMiXSwibmFtZXMiOlsiSGF3a3VsYXJBY2NvdW50cyIsIkhhd2t1bGFyQWNjb3VudHMuQXV0aFNlcnZpY2UiLCJIYXdrdWxhckFjY291bnRzLkF1dGhTZXJ2aWNlLmNvbnN0cnVjdG9yIiwiSGF3a3VsYXJBY2NvdW50cy5BdXRoU2VydmljZS5rZXljbG9hayIsIkhhd2t1bGFyQWNjb3VudHMuQXV0aFNlcnZpY2Uub25SZWFkeSIsIkhhd2t1bGFyQWNjb3VudHMuQXV0aFNlcnZpY2UubG9nb3V0IiwiSGF3a3VsYXJBY2NvdW50cy5BdXRoU2VydmljZS51cGRhdGVUb2tlbiIsIkhhd2t1bGFyQWNjb3VudHMuQXV0aFNlcnZpY2UudG9rZW4iLCJIYXdrdWxhckFjY291bnRzLkF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCIsIkhhd2t1bGFyQWNjb3VudHMuQXV0aEludGVyY2VwdG9yU2VydmljZSIsIkhhd2t1bGFyQWNjb3VudHMuQXV0aEludGVyY2VwdG9yU2VydmljZS5jb25zdHJ1Y3RvciIsIkhhd2t1bGFyQWNjb3VudHMuQXV0aEludGVyY2VwdG9yU2VydmljZS5GYWN0b3J5Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FDZUEsSUFBTyxnQkFBZ0IsQ0FJdEI7QUFKRCxXQUFPLGdC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Q0FBQ0EsQ0FBQ0E7QUFDeENBLENBQUNBLEVBL0RNLGdCQUFnQixLQUFoQixnQkFBZ0IsUUErRHRCIiwiZmlsZSI6ImNvbXBpbGVkLmpzIiwic291cmNlc0NvbnRlbnQiOltudWxsLCIvLy8gQ29weXJpZ2h0IDIwMTQtMjAxNSBSZWQgSGF0LCBJbmMuIGFuZC9vciBpdHMgYWZmaWxpYXRlc1xuLy8vIGFuZCBvdGhlciBjb250cmlidXRvcnMgYXMgaW5kaWNhdGVkIGJ5IHRoZSBAYXV0aG9yIHRhZ3MuXG4vLy9cbi8vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vL1xuLy8vICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vLy9cbi8vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL2luY2x1ZGVzLnRzXCIvPlxubW9kdWxlIEhhd2t1bGFyQWNjb3VudHMge1xuICAgIGV4cG9ydCB2YXIgcGx1Z2luTmFtZSA9IFwiaGF3a3VsYXItYWNjb3VudHNcIjtcbiAgICBleHBvcnQgdmFyIGxvZzpMb2dnaW5nLkxvZ2dlciA9IExvZ2dlci5nZXQocGx1Z2luTmFtZSk7XG4gICAgZXhwb3J0IHZhciB0ZW1wbGF0ZVBhdGggPSBcInBsdWdpbnMvYWNjb3VudHMvaHRtbFwiO1xufVxuIiwiLy8vIENvcHlyaWdodCAyMDE0LTIwMTUgUmVkIEhhdCwgSW5jLiBhbmQvb3IgaXRzIGFmZmlsaWF0ZXNcbi8vLyBhbmQgb3RoZXIgY29udHJpYnV0b3JzIGFzIGluZGljYXRlZCBieSB0aGUgQGF1dGhvciB0YWdzLlxuLy8vXG4vLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vLy9cbi8vLyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy8vXG4vLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJhY2NvdW50c0dsb2JhbHMudHNcIi8+XG5tb2R1bGUgSGF3a3VsYXJBY2NvdW50cyB7XG4gICAgZXhwb3J0IHZhciBfbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoSGF3a3VsYXJBY2NvdW50cy5wbHVnaW5OYW1lLCBbXSk7XG4gICAgdmFyIGFjY291bnRzVGFiOmFueSA9IHVuZGVmaW5lZDtcblxuICAgIF9tb2R1bGUuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCAnJHJvdXRlUHJvdmlkZXInLCAnSGF3dGlvTmF2QnVpbGRlclByb3ZpZGVyJywgKCRsb2NhdGlvblByb3ZpZGVyLCAkcm91dGVQcm92aWRlcjpuZy5yb3V0ZS5JUm91dGVQcm92aWRlciwgYnVpbGRlcjpIYXd0aW9NYWluTmF2LkJ1aWxkZXJGYWN0b3J5KSA9PiB7XG4gICAgICAgIGFjY291bnRzVGFiID0gYnVpbGRlci5jcmVhdGUoKVxuICAgICAgICAgICAgLmlkKEhhd2t1bGFyQWNjb3VudHMucGx1Z2luTmFtZSlcbiAgICAgICAgICAgIC50aXRsZSgoKSA9PiBcIkFjY291bnRzXCIpXG4gICAgICAgICAgICAuaHJlZigoKSA9PiBcIi9hY2NvdW50c1wiKVxuICAgICAgICAgICAgLnN1YlBhdGgoXCJNeSBhY2NvdW50XCIsIFwiYWNjb3VudHNcIiwgYnVpbGRlci5qb2luKEhhd2t1bGFyQWNjb3VudHMudGVtcGxhdGVQYXRoLCAnYWNjb3VudHMuaHRtbCcpKVxuICAgICAgICAgICAgLnN1YlBhdGgoXCJPcmdhbml6YXRpb25zXCIsIFwib3JnYW5pemF0aW9uc1wiLCBidWlsZGVyLmpvaW4oSGF3a3VsYXJBY2NvdW50cy50ZW1wbGF0ZVBhdGgsICdvcmdhbml6YXRpb25zLmh0bWwnKSlcbiAgICAgICAgICAgIC5idWlsZCgpO1xuICAgICAgICBidWlsZGVyLmNvbmZpZ3VyZVJvdXRpbmcoJHJvdXRlUHJvdmlkZXIsIGFjY291bnRzVGFiKTtcblxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvYWNjb3VudHMvb3JnYW5pemF0aW9ucy9uZXcnLCB7dGVtcGxhdGVVcmw6IGJ1aWxkZXIuam9pbihIYXdrdWxhckFjY291bnRzLnRlbXBsYXRlUGF0aCwgJ29yZ2FuaXphdGlvbl9uZXcuaHRtbCcpfSk7XG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICB9XSk7XG5cbiAgICBfbW9kdWxlLnJ1bihbJ0hhd3Rpb05hdicsIChIYXd0aW9OYXY6SGF3dGlvTWFpbk5hdi5SZWdpc3RyeSkgPT4ge1xuICAgICAgICAvL0hhd3Rpb05hdi5hZGQoYWNjb3VudHNUYWIpO1xuICAgIH1dKTtcblxuICAgIGhhd3Rpb1BsdWdpbkxvYWRlci5hZGRNb2R1bGUoSGF3a3VsYXJBY2NvdW50cy5wbHVnaW5OYW1lKTtcbn1cbiIsIi8vLyBDb3B5cmlnaHQgMjAxNC0yMDE1IFJlZCBIYXQsIEluYy4gYW5kL29yIGl0cyBhZmZpbGlhdGVzXG4vLy8gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyBhcyBpbmRpY2F0ZWQgYnkgdGhlIEBhdXRob3IgdGFncy5cbi8vL1xuLy8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy8vXG4vLy8gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vL1xuLy8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiYWNjb3VudHNQbHVnaW4udHNcIi8+XG4vKipcbiAqIEF0dGVudGlvbjogdGhpcyBjbGFzcyB3aWxsIHByb2JhYmx5IGJlIHJlcGxhY2VkIGJ5IHRoZSBwcm9wZXIgaGF3dC5pbyBLZXljbG9hayBpbnRlZ3JhdGlvbi5cbiAqIFdoaWxlIGl0J3Mgbm90IGRvbmUsIHdlIGFyZSBkb2luZyB0aGUgaW50ZWdyYXRpb24gYnkgb3Vyc2VsdmVzLlxuICovXG5tb2R1bGUgSGF3a3VsYXJBY2NvdW50cyB7XG5cbiAgICBleHBvcnQgY2xhc3MgQXV0aFNlcnZpY2Uge1xuICAgICAgICBwdWJsaWMgc3RhdGljICRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHdpbmRvdyddO1xuICAgICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlICRyb290U2NvcGU6bmcuSVJvb3RTY29wZVNlcnZpY2UsIHByaXZhdGUgJHdpbmRvdzpuZy5JV2luZG93U2VydmljZSkge1xuICAgICAgICAgIHRoaXMub25SZWFkeSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiRyb290U2NvcGVbJ3VzZXJuYW1lJ10gPSB0aGlzLmtleWNsb2FrKCkuaWRUb2tlblBhcnNlZC5uYW1lO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBrZXljbG9haygpOmFueSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kd2luZG93WydrZXljbG9hayddO1xuICAgICAgICB9XG5cbiAgICAgICAgb25SZWFkeShjYWxsYmFjayk6YW55IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiR3aW5kb3dbJ2tleWNsb2FrUmVhZHknXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmtleWNsb2FrKCkub25SZWFkeSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiR3aW5kb3dbJ2tleWNsb2FrUmVhZHknXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxvZ291dCgpOnZvaWQge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5Y2xvYWsoKS5sb2dvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZVRva2VuKHBlcmlvZGljaXR5Om51bWJlcik6YW55IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtleWNsb2FrKCkudXBkYXRlVG9rZW4ocGVyaW9kaWNpdHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdG9rZW4oKTpzdHJpbmcge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5Y2xvYWsoKS50b2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlzQXV0aGVudGljYXRlZCgpOmJvb2xlYW4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5Y2xvYWsoKSAmJiB0aGlzLmtleWNsb2FrKCkuYXV0aGVudGljYXRlZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9tb2R1bGUuc2VydmljZSgnQXV0aCcsIEF1dGhTZXJ2aWNlKTtcbn1cbiIsIi8vLyBDb3B5cmlnaHQgMjAxNC0yMDE1IFJlZCBIYXQsIEluYy4gYW5kL29yIGl0cyBhZmZpbGlhdGVzXG4vLy8gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyBhcyBpbmRpY2F0ZWQgYnkgdGhlIEBhdXRob3IgdGFncy5cbi8vL1xuLy8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy8vXG4vLy8gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vL1xuLy8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiYWNjb3VudHNQbHVnaW4udHNcIi8+XG4vKipcbiAqIEF0dGVudGlvbjogdGhpcyBjbGFzcyB3aWxsIHByb2JhYmx5IGJlIHJlcGxhY2VkIGJ5IHRoZSBwcm9wZXIgaGF3dC5pbyBLZXljbG9hayBpbnRlZ3JhdGlvbi5cbiAqIFdoaWxlIGl0J3Mgbm90IGRvbmUsIHdlIGFyZSBkb2luZyB0aGUgaW50ZWdyYXRpb24gYnkgb3Vyc2VsdmVzLlxuICovXG5tb2R1bGUgSGF3a3VsYXJBY2NvdW50cyB7XG5cbiAgICBleHBvcnQgY2xhc3MgQXV0aEludGVyY2VwdG9yU2VydmljZSB7XG4gICAgICAgIHB1YmxpYyBzdGF0aWMgJGluamVjdCA9IFsnJHEnLCAnQXV0aCddO1xuXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRmFjdG9yeSgkcTpuZy5JUVNlcnZpY2UsIEF1dGg6SGF3a3VsYXJBY2NvdW50cy5BdXRoU2VydmljZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBdXRoSW50ZXJjZXB0b3JTZXJ2aWNlKCRxLCBBdXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgJHE6bmcuSVFTZXJ2aWNlLCBwcml2YXRlIEF1dGg6SGF3a3VsYXJBY2NvdW50cy5BdXRoU2VydmljZSkge1xuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdCA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdJbnRlcmNlcHRpbmcgcmVxdWVzdCcpO1xuICAgICAgICAgICAgdmFyIEJBU0VfVVJMID0gXCJodHRwOi8vbG9jYWxob3N0OjgwODAvaGF3a3VsYXItXCI7XG4gICAgICAgICAgICB2YXIgYWRkQmVhcmVyLCBkZWZlcnJlZDtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnVybC5pbmRleE9mKEJBU0VfVVJMKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdUaGUgcmVxdWVzdGVkIFVSTCBpcyBub3QgcGFydCBvZiB0aGUgYmFzZSBVUkwuIEJhc2UgVVJMOiAnICsgQkFTRV9VUkwgKyAnLCByZXF1ZXN0ZWQgVVJMOiAnICsgcmVxdWVzdC51cmwpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkQmVhcmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkF1dGgudXBkYXRlVG9rZW4oNSkuc3VjY2VzcygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLkF1dGgudG9rZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0FkZGluZyBiZWFyZXIgdG9rZW4gdG8gdGhlIHJlcXVlc3Q6ICcgKyB0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIHRva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucmVzb2x2ZShyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSkuZXJyb3IoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb3VsZG4ndCB1cGRhdGUgdG9rZW5cIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRlZmVycmVkID0gdGhpcy4kcS5kZWZlcigpO1xuICAgICAgICAgICAgdGhpcy5BdXRoLm9uUmVhZHkoYWRkQmVhcmVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRxLndoZW4oZGVmZXJyZWQucHJvbWlzZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVzcG9uc2VFcnJvciA9IChyZWplY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0ludGVyY2VwdGluZyBlcnJvciByZXNwb25zZScpO1xuICAgICAgICAgICAgaWYgKHJlamVjdGlvbi5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IG5vdGlmeSB0aGUgdXNlciB0aGF0IHRoZSBzZXNzaW9uIGlzIGV4cGlyZWRcbiAgICAgICAgICAgICAgICB0aGlzLkF1dGgubG9nb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfbW9kdWxlLmNvbmZpZyhmdW5jdGlvbigkaHR0cFByb3ZpZGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ0FkZGluZyBBdXRoSW50ZXJjZXB0b3InKTtcbiAgICAgICAgcmV0dXJuICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goSGF3a3VsYXJBY2NvdW50cy5BdXRoSW50ZXJjZXB0b3JTZXJ2aWNlLkZhY3RvcnkpO1xuICAgIH0pO1xufVxuIiwiLy8vIENvcHlyaWdodCAyMDE0LTIwMTUgUmVkIEhhdCwgSW5jLiBhbmQvb3IgaXRzIGFmZmlsaWF0ZXNcbi8vLyBhbmQgb3RoZXIgY29udHJpYnV0b3JzIGFzIGluZGljYXRlZCBieSB0aGUgQGF1dGhvciB0YWdzLlxuLy8vXG4vLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vLy9cbi8vLyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy8vXG4vLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJhY2NvdW50c1BsdWdpbi50c1wiLz5cbm1vZHVsZSBIYXdrdWxhckFjY291bnRzIHtcblxuICAgIGV4cG9ydCB2YXIgT3JnYW5pemF0aW9uc0NvbnRyb2xsZXIgPSBfbW9kdWxlLmNvbnRyb2xsZXIoXCJIYXdrdWxhckFjY291bnRzLk9yZ2FuaXphdGlvbnNDb250cm9sbGVyXCIsIFtcbiAgICAgICAgJyRzY29wZScsICdIYXdrdWxhckFjY291bnRzLk9yZ2FuaXphdGlvblNlcnZpY2UnLCAnJGxvZycsICckbG9jYXRpb24nLFxuICAgICAgICAoJHNjb3BlLCBPcmdhbml6YXRpb25TZXJ2aWNlLCAkbG9nLCAkbG9jYXRpb24pID0+IHtcblxuICAgICAgICAgICAgJHNjb3BlLm9yZ2FuaXphdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICRsb2cuZGVidWcoXCJUcnlpbmcgdG8gbG9hZCB0aGUgb3JnYW5pemF0aW9ucyBmb3IgdGhpcyB1c2VyLlwiKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JnYW5pemF0aW9ucyA9IE9yZ2FuaXphdGlvblNlcnZpY2UucXVlcnkoe30sXG4gICAgICAgICAgICAgICAgICAgICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGxvZy5kZWJ1ZyhcIkxpc3Qgb2Ygb3JnYW5pemF0aW9ucyByZXRyaWV2ZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGxvZy53YXJuKFwiTGlzdCBvZiBvcmdhbml6YXRpb25zIGNvdWxkIE5PVCBiZSByZXRyaWV2ZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJHNjb3BlLnNob3dDcmVhdGVGb3JtID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYWNjb3VudHMvb3JnYW5pemF0aW9ucy9uZXcnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkc2NvcGUucmVtb3ZlID0gKG9yZ2FuaXphdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi4kcmVtb3ZlKCkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlZCFcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2cuZGVidWcoXCJPcmdhbml6YXRpb24gcmVtb3ZlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmdhbml6YXRpb25zLnNwbGljZSgkc2NvcGUub3JnYW5pemF0aW9ucy5pbmRleE9mKG9yZ2FuaXphdGlvbiksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5sb2FkKCk7XG4gICAgICAgIH1dKTtcblxuICAgIGV4cG9ydCB2YXIgT3JnYW5pemF0aW9uTmV3Q29udHJvbGxlciA9IF9tb2R1bGUuY29udHJvbGxlcihcIkhhd2t1bGFyQWNjb3VudHMuT3JnYW5pemF0aW9uTmV3Q29udHJvbGxlclwiLCBbXG4gICAgICAgICckc2NvcGUnLCAnSGF3a3VsYXJBY2NvdW50cy5Pcmdhbml6YXRpb25TZXJ2aWNlJywgJyRsb2cnLCAnJGxvY2F0aW9uJyxcbiAgICAgICAgKCRzY29wZSwgT3JnYW5pemF0aW9uU2VydmljZSwgJGxvZywgJGxvY2F0aW9uKSA9PiB7XG5cbiAgICAgICAgICAgICRzY29wZS5vcmdhbml6YXRpb25OZXcgPSBuZXcgT3JnYW5pemF0aW9uU2VydmljZSh7fSk7XG4gICAgICAgICAgICAkc2NvcGUucGVyc2lzdCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JnYW5pemF0aW9uTmV3LiRzYXZlKHt9LFxuICAgICAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdWNjZXNzXG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9nLmRlYnVnKFwiT3JnYW5pemF0aW9uIGFkZGVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYWNjb3VudHMvb3JnYW5pemF0aW9ucycpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgJGxvZy5kZWJ1ZyhcIk9yZ2FuaXphdGlvbiBjb3VsZCBOT1QgYmUgYWRkZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAkbG9nLmRlYnVnKFwiVHJ5aW5nIHRvIHBlcnNpc3QgdGhlIG9yZ2FuaXphdGlvblwiKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1dKTtcblxuICAgIGV4cG9ydCB2YXIgT3JnYW5pemF0aW9uU2VydmljZSA9IF9tb2R1bGUuc2VydmljZShcIkhhd2t1bGFyQWNjb3VudHMuT3JnYW5pemF0aW9uU2VydmljZVwiLCBbXCIkcmVzb3VyY2VcIiwgKCRyZXNvdXJjZSkgPT4ge1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vbG9jYWxob3N0OjgwODAvaGF3a3VsYXItYWNjb3VudHMvb3JnYW5pemF0aW9ucy86aWQnLCB7aWQ6J0BpZCd9KTtcbiAgICB9XSk7XG5cbiAgICBfbW9kdWxlLnJlcXVpcmVzLnB1c2goXCJuZ1Jlc291cmNlXCIpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
angular.module("hawkular-ui-components-accounts-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("plugins/accounts/html/accounts.html","<div class=\"row\">\n    <div class=\"col-md-12\">\n        <h1>Accounts</h1>\n        Your account can be managed directly at <a href=\"http://localhost:8080/auth/realms/hawkular/account\">Keycloak</a>.\n    </div>\n</div>\n");
$templateCache.put("plugins/accounts/html/organization_new.html","<div class=\"row\">\n    <div class=\"col-md-12\" data-ng-controller=\"HawkularAccounts.OrganizationNewController\">\n        <ol class=\"breadcrumb\">\n            <li><a data-ng-href=\"/\">Hawkular</a></li>\n            <li><a data-ng-href=\"/\">Accounts</a></li>\n            <li><a data-ng-href=\"/accounts/organizations\">Organizations</a></li>\n        </ol>\n        <h1>\n            Add Organization\n        </h1>\n\n        <form role=\"form\" class=\"form-horizontal\">\n            <div class=\"form-group\">\n                <label for=\"name\" class=\"col-md-2 control-label\">Name <span class=\"required\">*</span> </label>\n                <div class=\"col-md-6\">\n                    <input type=\"text\" class=\"form-control\" id=\"name\" placeholder=\"Name\"\n                           data-ng-model=\"organizationNew.name\">\n                </div>\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"description\" class=\"col-md-2 control-label\">Description</label>\n                <div class=\"col-md-6\">\n                    <input type=\"text\" class=\"form-control\" id=\"description\" placeholder=\"Description\"\n                           data-ng-model=\"organizationNew.description\">\n                </div>\n            </div>\n            <div class=\"col-md-8\">\n                <div class=\"pull-right\">\n                    <a data-ng-href=\"/accounts/organizations\" class=\"btn btn-default btn-lg\">Cancel</a>\n                    <button data-ng-click=\"persist()\" type=\"submit\" class=\"btn btn-primary btn-lg\">Save</button>\n                </div>\n            </div>\n\n        </form>\n    </div><!-- /col -->\n</div><!-- /row -->\n");
$templateCache.put("plugins/accounts/html/organizations.html","<div class=\"row\">\n    <div class=\"col-md-12\" data-ng-controller=\"HawkularAccounts.OrganizationsController\">\n        <ol class=\"breadcrumb\">\n            <li><a data-ng-href=\"/\">Hawkular</a></li>\n            <li><a data-ng-href=\"/\">Accounts</a></li>\n            <li><a data-ng-href=\"/accounts/organizations\">Organizations</a></li>\n        </ol>\n        <div class=\"pull-right\">\n            <button class=\"btn btn-primary\" type=\"button\" role=\"button\" data-ng-click=\"showCreateForm()\">Create</button>\n        </div>\n\n        <h1>Organizations</h1>\n        <div class=\"progress-description\" data-ng-show=\"loading\">\n            <div class=\"spinner spinner-xs spinner-inline\"></div> <strong>Loading:</strong> Organizations\n        </div>\n        <div class=\"row\" data-ng-show=\"!organizations.length && !loading\">\n            <div class=\"col-sm-6\">\n                No organizations yet. How about creating one?\n            </div>\n        </div>\n\n        <div data-ng-show=\"organizations.length && !loading\">\n            <table class=\"table table-striped table-bordered\">\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Description</th>\n                        <th>&nbsp;</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr data-ng-repeat=\"organization in organizations\">\n                        <td>{{organization.name}}</td>\n                        <td>{{organization.description}}</td>\n                        <td>\n                            <button type=\"button\" class=\"btn btn-default\" aria-label=\"Remove\" data-ng-click=\"remove(organization)\">\n                                <span class=\"pficon pficon-delete\" aria-hidden=\"true\"></span>\n                            </button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div><!-- /col -->\n\n</div>\n</div>\n");}]); hawtioPluginLoader.addModule("hawkular-ui-components-accounts-templates");